
import React, { useState, useEffect, useRef } from "react";
import { Link, useParams, useNavigate } from "react-router-dom";
import EmployeeAuth from "../../Hooks/useAuth";
import AdminSidebarMenu from "../../Components/Common/admin_sidebarmenu";
import HeaderDashboard from "../../Components/Layout/Header_dashboard";
import styles from "../../Styles/dashboard.module.css";
// Icons
import projectsIcon from "../../Assets/images/projects.svg"; // Fallback or use specific colored box logic
import employeesIcon from "../../Assets/images/employees.svg"; // Using as placeholder
import { AiOutlineProject, AiOutlineUsergroupAdd } from "react-icons/ai"; // React Icons for better styling match if SVGs don't fit
import { FaTasks, FaRegCalendarTimes, FaEye } from "react-icons/fa";
import { HiUserGroup } from "react-icons/hi";

const Admindashboard = () => {
  const { empId } = useParams();
  const [Emply, SetEmply] = useState(null);
  const { fetchemployeeDetails } = EmployeeAuth();
  const navigate = useNavigate();
  
  // State for dropdown
  const [openDropdownIndex, setOpenDropdownIndex] = useState(null);
  const [leaveStatuses, setLeaveStatuses] = useState({});
  const dropdownRef = useRef(null);

  useEffect(() => {
    const fetchData = async () => {
      const response = await fetchemployeeDetails();
      if (response) {
        SetEmply(response);
      }
    };
    fetchData();
  }, []);

  // Close dropdown when clicking outside
  useEffect(() => {
    const handleClickOutside = (event) => {
      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {
        setOpenDropdownIndex(null);
      }
    };
    document.addEventListener("mousedown", handleClickOutside);
    return () => document.removeEventListener("mousedown", handleClickOutside);
  }, []);

  const toggleDropdown = (index) => {
    setOpenDropdownIndex(openDropdownIndex === index ? null : index);
  };

  const handleStatusSelect = (index, status) => {
    setLeaveStatuses({ ...leaveStatuses, [index]: status });
    setOpenDropdownIndex(null);
  };

  // Mock Data for Tables
  const overdueProjects = [
    { name: "Project one", date: "15-01-2025" },
    { name: "Project Two", date: "17-01-2025" },
    { name: "Project Three", date: "18-01-2025" },
  ];

  const upcomingProjects = [
    { name: "Project Ten", date: "28-01-2025" },
    { name: "Project Seven", date: "29-01-2025" },
    { name: "Project Eight", date: "08-02-2025" },
  ];

  const leaveApplications = [
    { name: "Vishal", fromDate: "26-01-25", toDate: "30-01-25", status: "Pending" },
    { name: "Veera babu", fromDate: "31-01-25", toDate: "05-02-25", status: "Pending" },
    { name: "Jagadeesh", fromDate: "24-01-25", toDate: "24-02-25", status: "Pending" },
    { name: "Lokesh", fromDate: "25-01-25", toDate: "26-01-25", status: "Pending" },
    { name: "Shayam", fromDate: "02-02-25", toDate: "03-02-25", status: "Pending" },
  ];

  return (
    <div className={styles.emp_dashboard_wrapper}>
      <AdminSidebarMenu />
      <div className={styles.admin_dashboard_main}>
        <HeaderDashboard />
        
        <div className={styles.dashboard_content}>
          <h2 className={styles.pageTitle}>Dashboard</h2>

          <div className={styles.dashboard_grid}>
            
            {/* Left Column: Stats */}
            <div className={styles.col_left}>
              <div className={styles.stat_card}>
                <div className={`${styles.icon_box} ${styles.icon_yellow}`}>
                   <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                      <path d="M12 7C12.5523 7 13 6.55228 13 6C13 5.44772 12.5523 5 12 5C11.4477 5 11 5.44772 11 6C11 6.55228 11.4477 7 12 7Z" fill="black"/>
                      <path d="M6 17H18V19H6V17ZM10 11.83L12.792 14.624L16.724 10.689L18 12V8H14L15.31 9.275L12.791 11.794L10 9L6 13L7.414 14.414L10 11.83Z" fill="black"/>
                      <path d="M19 3.00001H15.702C15.603 2.85276 15.4961 2.71089 15.382 2.57501L15.372 2.56301C14.637 1.70758 13.6034 1.16468 12.482 1.04501C12.1635 0.984916 11.8365 0.984916 11.518 1.04501C10.3966 1.16468 9.36298 1.70758 8.628 2.56301L8.618 2.57501C8.5039 2.71057 8.39708 2.8521 8.298 2.99901V3.00001H5C4.20459 3.0008 3.44199 3.31713 2.87956 3.87956C2.31712 4.442 2.00079 5.2046 2 6.00001V20C2.00079 20.7954 2.31712 21.558 2.87956 22.1205C3.44199 22.6829 4.20459 22.9992 5 23H19C19.7954 22.9992 20.558 22.6829 21.1204 22.1205C21.6829 21.558 21.9992 20.7954 22 20V6.00001C21.9992 5.2046 21.6829 4.442 21.1204 3.87956C20.558 3.31713 19.7954 3.0008 19 3.00001ZM20 20C20 20.2652 19.8946 20.5196 19.7071 20.7071C19.5196 20.8947 19.2652 21 19 21H5C4.73478 21 4.48043 20.8947 4.29289 20.7071C4.10536 20.5196 4 20.2652 4 20V6.00001C4 5.73479 4.10536 5.48044 4.29289 5.2929C4.48043 5.10536 4.73478 5.00001 5 5.00001H9.55C9.66476 4.43486 9.97136 3.92677 10.4179 3.56182C10.8644 3.19687 11.4233 2.9975 12 2.9975C12.5767 2.9975 13.1356 3.19687 13.5821 3.56182C14.0286 3.92677 14.3352 4.43486 14.45 5.00001H19C19.2652 5.00001 19.5196 5.10536 19.7071 5.2929C19.8946 5.48044 20 5.73479 20 6.00001V20Z" fill="black"/>
                   </svg>
                </div>
                <div className={styles.stat_info}>
                  <span className={styles.stat_value}>10</span>
                  <span className={styles.stat_label}>Total Projects</span>
                </div>
              </div>

              <div className={styles.stat_card}>
                <div className={`${styles.icon_box} ${styles.icon_green}`}>
                   <svg xmlns="http://www.w3.org/2000/svg" width="20" height="18" viewBox="0 0 20 18" fill="none">
                      <path d="M9 16.5V16C9 14.9391 9.42143 13.9217 10.1716 13.1716C10.9217 12.4214 11.9391 12 13 12H14C15.0609 12 16.0783 12.4214 16.8284 13.1716C17.5786 13.9217 18 14.9391 18 16V16.5M16 7.5C16 8.16304 15.7366 8.79893 15.2678 9.26777C14.7989 9.73661 14.163 10 13.5 10C12.837 10 12.2011 9.73661 11.7322 9.26777C11.2634 8.79893 11 8.16304 11 7.5C11 6.83696 11.2634 6.20107 11.7322 5.73223C12.2011 5.26339 12.837 5 13.5 5C14.163 5 14.7989 5.26339 15.2678 5.73223C15.7366 6.20107 16 6.83696 16 7.5Z" stroke="black" strokeLinejoin="round"/>
                      <path d="M0.5 12V11.5C0.5 10.4391 0.921427 9.42172 1.67157 8.67157C2.42172 7.92143 3.43913 7.5 4.5 7.5H5.5C6.56087 7.5 7.57828 7.92143 8.32843 8.67157C9.07857 9.42172 9.5 10.4391 9.5 11.5V12M7.5 3C7.5 3.66304 7.23661 4.29893 6.76777 4.76777C6.29893 5.23661 5.66304 5.5 5 5.5C4.33696 5.5 3.70107 5.23661 3.23223 4.76777C2.76339 4.29893 2.5 3.66304 2.5 3C2.5 2.33696 2.76339 1.70107 3.23223 1.23223C3.70107 0.763392 4.33696 0.5 5 0.5C5.66304 0.5 6.29893 0.763392 6.76777 1.23223C7.23661 1.70107 7.5 2.33696 7.5 3Z" stroke="black" strokeLinejoin="round"/>
                   </svg>
                </div>
                <div className={styles.stat_info}>
                  <span className={styles.stat_value}>10</span>
                  <span className={styles.stat_label}>Total Clients</span>
                </div>
              </div>

              <div className={styles.stat_card}>
                <div className={`${styles.icon_box} ${styles.icon_purple}`}>
                   <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                      <path d="M9.20999 8.15498C8.64762 8.14906 8.09958 7.97689 7.63487 7.66016C7.17015 7.34342 6.80953 6.89627 6.59841 6.375C6.3873 5.85374 6.33512 5.28167 6.44845 4.73081C6.56179 4.17996 6.83556 3.67495 7.23531 3.27936C7.63506 2.88378 8.14291 2.61531 8.69492 2.50775C9.24693 2.40019 9.81843 2.45835 10.3374 2.67492C10.8565 2.89148 11.2998 3.25676 11.6117 3.72477C11.9235 4.19278 12.09 4.74259 12.09 5.30498C12.0847 6.06442 11.7786 6.7908 11.2388 7.32499C10.699 7.85919 9.96943 8.15765 9.20999 8.15498ZM9.20999 3.45498C8.84543 3.4609 8.49074 3.5744 8.19048 3.78124C7.89022 3.98808 7.65778 4.27904 7.52235 4.61756C7.38691 4.95608 7.35453 5.32707 7.42926 5.68394C7.504 6.0408 7.68252 6.36763 7.9424 6.62337C8.20228 6.8791 8.53194 7.05234 8.88996 7.12132C9.24798 7.19031 9.61841 7.15196 9.9547 7.0111C10.291 6.87024 10.5782 6.63315 10.7802 6.3296C10.9822 6.02605 11.0899 5.66959 11.09 5.30498C11.0847 4.81077 10.884 4.33874 10.5317 3.99207C10.1794 3.64541 9.70422 3.45231 9.20999 3.45498Z" fill="black"/>
                      <path d="M9.20999 8.15498C8.64763 8.14906 8.09959 7.97689 7.63488 7.66016C7.17016 7.34342 6.80954 6.89627 6.59842 6.375C6.38731 5.85374 6.33513 5.28167 6.44846 4.73081C6.56179 4.17996 6.83557 3.67495 7.23532 3.27936C7.63507 2.88378 8.14292 2.61531 8.69493 2.50775C9.24694 2.40019 9.81843 2.45835 10.3375 2.67492C10.8565 2.89148 11.2998 3.25676 11.6117 3.72477C11.9235 4.19278 12.09 4.74259 12.09 5.30498C12.0847 6.06442 11.7786 6.7908 11.2388 7.32499C10.699 7.85919 9.96944 8.15765 9.20999 8.15498ZM9.20999 3.45498C8.84543 3.4609 8.49075 3.5744 8.19049 3.78124C7.89023 3.98808 7.65779 4.27904 7.52235 4.61756C7.38692 4.95608 7.35454 5.32707 7.42927 5.68394C7.50401 6.0408 7.68253 6.36763 7.94241 6.62337C8.20229 6.8791 8.53195 7.05234 8.88997 7.12132C9.24799 7.19031 9.61841 7.15196 9.95471 7.0111C10.291 6.87024 10.5782 6.63315 10.7802 6.3296C10.9822 6.02605 11.0899 5.66959 11.09 5.30498C11.0847 4.81077 10.884 4.33874 10.5317 3.99207C10.1794 3.64541 9.70423 3.45231 9.20999 3.45498ZM10.955 8.82498C8.73726 8.43908 6.45417 8.79032 4.45499 9.82498C4.31308 9.90378 4.19557 10.0201 4.11532 10.1612C4.03507 10.3023 3.99518 10.4627 3.99999 10.625V12.405C3.99999 12.5376 4.05267 12.6648 4.14644 12.7585C4.24021 12.8523 4.36739 12.905 4.49999 12.905C4.6326 12.905 4.75978 12.8523 4.85355 12.7585C4.94731 12.6648 4.99999 12.5376 4.99999 12.405V10.69C6.85383 9.7598 8.96199 9.46466 11 9.84998L10.955 8.82498Z" fill="black"/>
                      <path d="M16.5 11H13.15V10.26C13.15 10.1274 13.0973 10.0002 13.0036 9.90646C12.9098 9.81269 12.7826 9.76001 12.65 9.76001C12.5174 9.76001 12.3902 9.81269 12.2964 9.90646C12.2027 10.0002 12.15 10.1274 12.15 10.26V11H8.5C8.36739 11 8.24021 11.0527 8.14645 11.1465C8.05268 11.2402 8 11.3674 8 11.5V16.5C8 16.6326 8.05268 16.7598 8.14645 16.8536C8.24021 16.9473 8.36739 17 8.5 17H16.5C16.6326 17 16.7598 16.9473 16.8536 16.8536C16.9473 16.7598 17 16.6326 17 16.5V11.5C17 11.3674 16.9473 11.2402 16.8536 11.1465C16.7598 11.0527 16.6326 11 16.5 11ZM16 16H9V12H12.15V12.205C12.15 12.3376 12.2027 12.4648 12.2964 12.5586C12.3902 12.6523 12.5174 12.705 12.65 12.705C12.7826 12.705 12.9098 12.6523 13.0036 12.5586C13.0973 12.4648 13.15 12.3376 13.15 12.205V12H16V16Z" fill="black"/>
                      <path d="M10.905 13.71H13.885V14.41H10.905V13.71ZM5.42 6.12C4.03572 6.14316 2.67545 6.48536 1.445 7.12C1.31118 7.19068 1.19909 7.29641 1.12071 7.42587C1.04233 7.55533 1.0006 7.70366 1 7.855V9.405C1 9.53761 1.05268 9.66478 1.14645 9.75855C1.24021 9.85232 1.36739 9.905 1.5 9.905C1.63261 9.905 1.75979 9.85232 1.85355 9.75855C1.94732 9.66478 2 9.53761 2 9.405V7.955C3.17565 7.36981 4.47728 7.08304 5.79 7.12C5.61838 6.80657 5.49372 6.46965 5.42 6.12ZM16.555 7.115C15.4514 6.5361 14.2386 6.19542 12.995 6.115C12.9215 6.46399 12.7986 6.80072 12.63 7.115C13.8015 7.1432 14.9523 7.43005 16 7.955V9.405C16 9.53761 16.0527 9.66478 16.1464 9.75855C16.2402 9.85232 16.3674 9.905 16.5 9.905C16.6326 9.905 16.7598 9.85232 16.8536 9.75855C16.9473 9.66478 17 9.53761 17 9.405V7.855C17.0003 7.70281 16.959 7.55343 16.8806 7.42301C16.8022 7.29259 16.6896 7.18608 16.555 7.115ZM5.33 5.305V4.97C4.93831 4.91758 4.58192 4.71612 4.33504 4.40755C4.08815 4.09898 3.96978 3.70707 4.00457 3.31343C4.0393 2.91978 4.22463 2.55471 4.52181 2.29423C4.81899 2.03374 5.20519 1.89791 5.6 1.915C6.01066 1.91425 6.40537 2.07393 6.7 2.36C6.96007 2.14575 7.24555 1.96439 7.55 1.82C7.20981 1.42883 6.75907 1.14992 6.25719 1.02003C5.75532 0.890149 5.22587 0.915386 4.73862 1.09242C4.25138 1.26945 3.82921 1.58997 3.52776 2.01172C3.22632 2.43348 3.05975 2.93668 3.05 3.455C3.06049 4.08938 3.3071 4.69706 3.74165 5.15935C4.1762 5.62163 4.76748 5.90532 5.4 5.955C5.35753 5.74082 5.33411 5.52331 5.33 5.305ZM12.385 0.914998C12.0414 0.915074 11.7013 0.983651 11.3845 1.11672C11.0677 1.24979 10.7806 1.44468 10.54 1.69C10.8777 1.81322 11.1972 1.9814 11.49 2.19C11.7234 2.02796 11.9964 1.93231 12.28 1.91325C12.5635 1.89419 12.8468 1.95243 13.0999 2.08176C13.3529 2.21109 13.566 2.40666 13.7166 2.64762C13.8672 2.88858 13.9496 3.1659 13.955 3.45C13.9519 3.74182 13.8661 4.02678 13.7077 4.27189C13.5493 4.517 13.3248 4.71224 13.06 4.835C13.0803 4.98916 13.0903 5.1445 13.09 5.3C13.0884 5.50097 13.0717 5.70154 13.04 5.9C13.5847 5.75996 14.0678 5.44379 14.4142 5.00068C14.7605 4.55757 14.9507 4.01239 14.955 3.45C14.9484 2.77365 14.6744 2.1274 14.1929 1.65242C13.7113 1.17743 13.0614 0.912324 12.385 0.914998Z" fill="black"/>
                   </svg>
                </div>
                <div className={styles.stat_info}>
                  <span className={styles.stat_value}>25</span>
                  <span className={styles.stat_label}>Total Employees</span>
                </div>
              </div>

              <div className={styles.stat_card}>
                <div className={`${styles.icon_box} ${styles.icon_pink}`}>
                   <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                      <path d="M9.20999 8.15498C8.64762 8.14906 8.09958 7.97689 7.63487 7.66016C7.17015 7.34342 6.80953 6.89627 6.59841 6.375C6.3873 5.85374 6.33512 5.28167 6.44845 4.73081C6.56179 4.17996 6.83556 3.67495 7.23531 3.27936C7.63506 2.88378 8.14291 2.61531 8.69492 2.50775C9.24693 2.40019 9.81843 2.45835 10.3374 2.67492C10.8565 2.89148 11.2998 3.25676 11.6117 3.72477C11.9235 4.19278 12.09 4.74259 12.09 5.30498C12.0847 6.06442 11.7786 6.7908 11.2388 7.32499C10.699 7.85919 9.96943 8.15765 9.20999 8.15498ZM9.20999 3.45498C8.84543 3.4609 8.49074 3.5744 8.19048 3.78124C7.89022 3.98808 7.65778 4.27904 7.52235 4.61756C7.38691 4.95608 7.35453 5.32707 7.42926 5.68394C7.504 6.0408 7.68252 6.36763 7.9424 6.62337C8.20228 6.8791 8.53194 7.05234 8.88996 7.12132C9.24798 7.19031 9.61841 7.15196 9.9547 7.0111C10.291 6.87024 10.5782 6.63315 10.7802 6.3296C10.9822 6.02605 11.0899 5.66959 11.09 5.30498C11.0847 4.81077 10.884 4.33874 10.5317 3.99207C10.1794 3.64541 9.70422 3.45231 9.20999 3.45498ZM9.21 8.15498C8.64764 8.14906 8.0996 7.97689 7.63489 7.66016C7.17017 7.34342 6.80955 6.89627 6.59843 6.375C6.38732 5.85374 6.33514 5.28167 6.44847 4.73081C6.56181 4.17996 6.83558 3.67495 7.23533 3.27936C7.63508 2.88378 8.14293 2.61531 8.69494 2.50775C9.24695 2.40019 9.81844 2.45835 10.3375 2.67492C10.8565 2.89148 11.2998 3.25676 11.6117 3.72477C11.9236 4.19278 12.09 4.74259 12.09 5.30498C12.0847 6.06442 11.7786 6.7908 11.2388 7.32499C10.699 7.85919 9.96945 8.15765 9.21 8.15498ZM9.21 3.45498C8.84544 3.4609 8.49076 3.5744 8.1905 3.78124C7.89024 3.98808 7.6578 4.27904 7.52237 4.61756C7.38693 4.95608 7.35455 5.32707 7.42928 5.68394C7.50402 6.04081 7.68254 6.36763 7.94242 6.62337C8.2023 6.8791 8.53196 7.05234 8.88998 7.12133C9.248 7.19031 9.61842 7.15196 9.95472 7.0111C10.291 6.87024 10.5782 6.63315 10.7802 6.3296C10.9822 6.02605 11.09 5.66959 11.09 5.30498C11.0847 4.81077 10.884 4.33874 10.5317 3.99207C10.1794 3.64541 9.70424 3.45231 9.21 3.45498ZM10.955 8.82498C8.73727 8.43908 6.45418 8.79032 4.455 9.82498C4.31309 9.90378 4.19558 10.0201 4.11533 10.1612C4.03508 10.3023 3.99519 10.4627 4 10.625V12.405C4 12.5376 4.05268 12.6648 4.14645 12.7585C4.24022 12.8523 4.3674 12.905 4.5 12.905C4.63261 12.905 4.75979 12.8523 4.85356 12.7585C4.94733 12.6648 5 12.5376 5 12.405V10.69C6.85384 9.7598 8.962 9.46466 11 9.84998L10.955 8.82498Z" fill="black"/>
                      <path d="M9.29 8.14723C9.85238 8.14131 10.4004 7.96915 10.8651 7.65241C11.3299 7.33567 11.6904 6.88852 11.9016 6.36725C12.1127 5.84599 12.1649 5.27392 12.0515 4.72306C11.9382 4.17221 11.6644 3.6672 11.2647 3.27161C10.8649 2.87603 10.3571 2.60756 9.80507 2.5C9.25303 2.39244 8.68158 2.45061 8.16254 2.66717C7.64349 2.88373 7.20017 3.24901 6.88831 3.71702C6.57644 4.18503 6.41003 4.73484 6.41 5.29723C6.41529 6.05667 6.72135 6.78305 7.26119 7.31725C7.80103 7.85144 8.53052 8.1499 9.29 8.14723ZM9.29 3.44723C9.65457 3.45315 10.0092 3.56665 10.3095 3.77349C10.6098 3.98034 10.8422 4.27129 10.9776 4.60981C11.1131 4.94833 11.1455 5.31932 11.0707 5.67619C10.996 6.03306 10.8175 6.35988 10.5576 6.61562C10.2977 6.87135 9.96806 7.04459 9.61003 7.11358C9.61003 7.11358 8.88159 7.14421 8.54528 7.00335C8.20897 6.86249 7.92181 6.6254 7.71982 6.32185C7.51783 6.01831 7.41005 5.66184 7.41 5.29723C7.41528 4.80302 7.61598 4.33099 7.96828 3.98433C8.32058 3.63766 8.79574 3.44456 9.29 3.44723ZM7.545 8.81723C9.76281 8.43133 12.0457 8.78257 14.045 9.81723C14.1869 9.89603 14.3044 10.0123 14.3847 10.1534C14.4649 10.2945 14.5048 10.455 14.5 10.6172V12.3972C14.5 12.5298 14.4473 12.657 14.3536 12.7508C14.2598 12.8446 14.1326 12.8972 14 12.8972C13.8674 12.8972 13.7402 12.8446 13.6464 12.7508C13.5527 12.657 13.5 12.5298 13.5 12.3972V10.6822C11.6461 9.75205 9.53808 9.45691 7.5 9.84223L7.545 8.81723Z" fill="black"/>
                      <path d="M5.41994 6.12C4.03566 6.14316 2.67539 6.48536 1.44494 7.12C1.31112 7.19068 1.19903 7.29641 1.12065 7.42587C1.04227 7.55533 1.00054 7.70366 0.999939 7.855V9.405C0.999939 9.53761 1.05262 9.66478 1.14639 9.75855C1.24015 9.85232 1.36733 9.905 1.49994 9.905C1.63255 9.905 1.75972 9.85232 1.85349 9.75855C1.94726 9.66478 1.99994 9.53761 1.99994 9.405V7.955C3.17559 7.36981 4.47722 7.08304 5.78994 7.12C5.61832 6.80657 5.41994 6.12 5.41994 6.12ZM16.5549 7.115C15.4514 6.5361 14.2385 6.19542 12.9949 6.115C12.9214 6.46399 12.7985 6.80072 12.6299 7.115C13.8015 7.1432 14.9522 7.43005 15.9999 7.955V9.405C15.9999 9.53761 16.0526 9.66478 16.1464 9.75855C16.2402 9.85232 16.3673 9.905 16.4999 9.905C16.6325 9.905 16.7597 9.85232 16.8535 9.75855C16.9473 9.66478 16.9999 9.53761 16.9999 9.405V7.855C17.0002 7.70281 16.959 7.55343 16.8805 7.42301C16.8021 7.29259 16.6895 7.18608 16.5549 7.115ZM5.32994 5.305V4.97C4.93825 4.91758 4.58186 4.71612 4.33497 4.40755C4.08808 4.09898 3.96972 3.70707 4.00451 3.31343C4.0393 2.91978 4.22457 2.55471 4.52175 2.29423C4.81893 2.03374 5.20512 1.89791 5.59994 1.915C6.0106 1.91425 6.40531 2.07393 6.69994 2.36C6.96001 2.14575 7.24549 1.96439 7.54994 1.82C7.20974 1.42883 6.759 1.14992 6.25713 1.02003C5.75526 0.890149 5.2258 0.915386 4.73856 1.09242C4.25131 1.26945 3.82915 1.58997 3.5277 2.01172C3.22626 2.43348 3.05969 2.93668 3.04994 3.455C3.06043 4.08938 3.30704 4.69706 3.74159 5.15935C4.17614 5.62163 4.76742 5.90532 5.39994 5.955C5.35747 5.74082 5.33405 5.52331 5.32994 5.305ZM12.3849 0.914998C12.0413 0.915074 11.7012 0.983651 11.3844 1.11672C11.0676 1.24979 10.7805 1.44468 10.5399 1.69C10.8776 1.81322 11.1972 1.9814 11.4899 2.19C11.7234 2.02796 11.9964 1.93231 12.2799 1.91325C12.5634 1.89419 12.8468 1.95243 13.0998 2.08176C13.3528 2.21109 13.566 2.40666 13.7166 2.64762C13.8672 2.88858 13.9496 3.1659 13.9549 3.45C13.9518 3.74182 13.8661 4.02678 13.7077 4.27189C13.5493 4.517 13.3247 4.71224 13.0599 4.835C13.0803 4.98916 13.0903 5.1445 13.0899 5.3C13.0884 5.50097 13.0717 5.70154 13.0399 5.9C13.5846 5.75996 14.0678 5.44379 14.4141 5.00068C14.7605 4.55757 14.9506 4.01239 14.9549 3.45C14.9483 2.77365 14.6743 2.1274 14.1928 1.65242C13.7113 1.17743 13.0613 0.912324 12.3849 0.914998Z" fill="black"/>
                   </svg>
                </div>
                <div className={styles.stat_info}>
                  <span className={styles.stat_value}>07</span>
                  <span className={styles.stat_label}>Total Leaves</span>
                </div>
              </div>
            </div>

            {/* Middle Column: Tables */}
            <div className={styles.col_mid}>
              <div className={styles.tables_wrapper}>
                {/* Overdue Projects */}
                <div className={styles.project_table_card}>
                  <div className={styles.table_header}>
                    <h3>Overdue Projects</h3>
                    <button className={styles.see_all_btn}>See All</button>
                  </div>
                  <table className={styles.project_table}>
                    <thead>
                      <tr>
                        <th style={{textAlign: 'left', paddingLeft: '20px'}}>Project Name</th>
                        <th>Due Date</th>
                        <th>Action</th>
                      </tr>
                    </thead>
                    <tbody>
                      {overdueProjects.map((proj, index) => (
                        <tr key={index}>
                          <td style={{textAlign: 'left', paddingLeft: '20px'}}>{proj.name}</td>
                          <td>{proj.date}</td>
                          <td><FaEye className={styles.action_icon} /></td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>

                {/* Upcoming Due Projects */}
                <div className={styles.project_table_card}>
                  <div className={styles.table_header}>
                    <h3>Upcoming Due Projects</h3>
                    <button className={styles.see_all_btn}>See All</button>
                  </div>
                  <table className={styles.project_table}>
                    <thead>
                      <tr>
                        <th style={{textAlign: 'left', paddingLeft: '20px'}}>Project Name</th>
                        <th>Due Date</th>
                        <th>Action</th>
                      </tr>
                    </thead>
                    <tbody>
                      {upcomingProjects.map((proj, index) => (
                        <tr key={index}>
                          <td style={{textAlign: 'left', paddingLeft: '20px'}}>{proj.name}</td>
                          <td>{proj.date}</td>
                          <td><FaEye className={styles.action_icon} /></td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            {/* Right Column: Leave List */}
            <div className={styles.col_right}>
              <div className={styles.leave_list_card}>
                <div className={styles.table_header}>
                    <h3>Leave Application</h3>
                    <button className={styles.see_all_btn}>See All</button>
                </div>
                <div className={styles.leave_list} ref={dropdownRef}>
                  {leaveApplications.map((leave, index) => (
                    <div key={index} className={styles.leave_item}>
                      <div className={styles.leave_info}>
                        <span className={styles.leave_name}>{leave.name}</span>
                        <span className={styles.leave_date}>From: {leave.fromDate} To: {leave.toDate}</span>
                      </div>
                      <div className={styles.custom_dropdown}>
                        <div 
                          className={styles.dropdown_toggle}
                          onClick={() => toggleDropdown(index)}
                        >
                          <span>{leaveStatuses[index] || leave.status}</span>
                          <svg 
                            xmlns="http://www.w3.org/2000/svg" 
                            width="12" 
                            height="12" 
                            viewBox="0 0 24 24" 
                            fill="none" 
                            stroke="currentColor" 
                            strokeWidth="2.5" 
                            strokeLinecap="round" 
                            strokeLinejoin="round"
                            className={openDropdownIndex === index ? styles.arrow_up : styles.arrow_down}
                          >
                            <path d="M6 9l6 6 6-6"/>
                          </svg>
                        </div>
                        {openDropdownIndex === index && (
                          <div className={styles.dropdown_menu}>
                            <div className={styles.dropdown_item} onClick={() => handleStatusSelect(index, 'Pending')}>Pending</div>
                            <div className={styles.dropdown_item} onClick={() => handleStatusSelect(index, 'Approved')}>Approved</div>
                            <div className={styles.dropdown_item} onClick={() => handleStatusSelect(index, 'Rejected')}>Rejected</div>
                          </div>
                        )}
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  );
};

export default Admindashboard;



